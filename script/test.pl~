
$HTK="/usr/local/HTS-2.2beta/bin/";
$HCopy="$HTK/HCopy";
$HInit= "$HTK/HInit -A -C config/train.cfg -D -T 1 -S general/train.scp -m 1 -u tmvw   ";
$HRest = "$HTK/HRest    -A    -C config/train.cfg -D -T 1 -S general/train.scp  -m 1 -u tmvw    ";
$HHEd="$HTK/HHEd -A -T 1 -D";
$HERest=" $HTK/HERest  -A -D  -T 1 ";

#
#
#
my $EXTRACT=0;
#

print "generate SCP file\n";
open SCP,">test/hcopy.scp" or die "can't open";
my @wavs=<test/wav/*.wav>;
mkdir "test/mfc",0755;
for (@wavs)
{
	my $name=`basename $_ .wav`;
	chomp $name;
	print SCP "$_ test/mfc/$name.mfc\n";
}
system('awk \'{print $2}\' test/hcopy.scp >test/test.scp');


if($EXTRACT)
{
print "Extract features\n ";
mkdir "mfc",0755;
system("$HCopy -T 1 -C config/hcopy.cfg -S test/hcopy.scp");
}

my $nHmm=5;
for(my $i=0;$i<$nHmm;$i++)
{
mkdir "test/lab/$i",0755;
system("HVite -a -b sil  -D -T 1 -A -m -l test/lab/$i  -y lab -o SW -I   test/words.mlf -S test/test.scp -H mmf/hmm$i/monophone.mmf  general/DICT  general/phoneme.lst");
}
